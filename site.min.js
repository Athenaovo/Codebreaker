/*! codebreaker 2018-04-27 */

function Code(e,t,n,d){this.text=t,this.encode=n,this.temdec=n,this.decode=d,this.array=["","","","","","","","","","","","","","","","","","","","","","","","","","",""],this.count=0;document.getElementById("encode").innerHTML=n,document.getElementById("decode").innerHTML=this.temdec,document.getElementById("game").innerHTML=' <tr>        <td>A:A <input type="checkbox" id ="A" name="A"></td>        <td>F:F <input type="checkbox" id ="F" name="F"></td>        <td>K:K <input type="checkbox" id ="K" name="K"></td>        <td>P:P <input type="checkbox" id ="P" name="P"></td>        <td>U:U <input type="checkbox" id ="U" name="U"></td>        <td>Z:Z <input type="checkbox" id ="Z" name="Z"></td>      </tr>      <tr>        <td>B:B <input type="checkbox" id="B" name="B"></td>        <td>G:G <input type="checkbox" id="G" name="G"></td>        <td>L:L <input type="checkbox" id="L" name="L"></td>        <td>Q:Q <input type="checkbox" id="Q" name="Q"></td>        <td>V:V <input type="checkbox" id="V" name="V"></td>      </tr>      <tr>        <td>C:C <input type="checkbox" id="C" name="C"></td>        <td>H:H <input type="checkbox" id="H" name="H"></td>        <td>M:M <input type="checkbox" id="M" name="M"></td>        <td>R:R <input type="checkbox" id="R" name="R"></td>        <td>W:W <input type="checkbox" id="W" name="W"></td>      </tr>      <tr>        <td>D:D <input type="checkbox" id="D" name="D"></td>        <td>I:I <input type="checkbox" id="I" name="I"></td>        <td>N:N <input type="checkbox" id="N" name="N"></td>        <td>S:S <input type="checkbox" id="S" name="S"></td>        <td>X:X <input type="checkbox" id="X" name="X"></td>      </tr>      <tr>        <td>E:E <input type="checkbox" id="E" name="E"></td>        <td>J:J <input type="checkbox" id="J" name="J"></td>        <td>O:O <input type="checkbox" id="O" name="O"></td>        <td>T:T <input type="checkbox" id="T" name="T"></td>        <td>Y:Y <input type="checkbox" id="Y" name="Y"></td>      </tr>',document.getElementById("solution").innerHTML=t,$("input#giveup").show(),$("input#swap").show(),$("table#game").show(),console.log(d),document.getElementById("giveup").onclick=function(e){e.preventDefault(),$("table#game").hide(),$("p#end").html("You gave up!"),$("input#giveup").hide(),$("input#swap").hide(),$("input#exit").hide(),document.getElementById("decode").innerHTML=t};for(var c=0;c<26;c++)this.clicked(c);var l=this;$("input#swap").click(function(e){if(console.log(l.count),l.count<2)document.getElementById("err").innerHTML="Must select at least two letters!";else{$("p#err").hide();for(var t=-1,n="",d=0;d<26;d++)if(""!=l.array[d])if(-1==t)t=d,n=l.array[d];else{var c=l.array[d];l.array[d]=n,n=c,d}l.array[t]=n,t=-1,console.log(l.array);for(d=0;d<26;d++)if(""!=l.array[d]){var i=String.fromCharCode(65+d),o=l.array[d],r="input#",a=$(r+=i).parent(),p=a.html().substr(0,2)+o+a.html().substr(3);a.html(p)}else{i=String.fromCharCode(65+d);var u="input#",m=$(u+=i).parent().html().charAt(2);l.array[d]=m}console.log(l.array);var h="";for(d=0;d<l.temdec.length;d++){var y=l.encode.charAt(d);(y=y.charCodeAt(0)-65)<0?h+=l.temdec.charAt(d):h+=l.array[y]}l.temdec=h,console.log(h),document.getElementById("decode").innerHTML=l.temdec,l.temdec==l.text&&($("p#end").html("You decoded the secret message!"),$("input#giveup").hide(),$("input#swap").hide(),$("input#exit").hide()),l.array=["","","","","","","","","","","","","","","","","","","","","","","","","","",""];for(d=l.count=0;d<26;d++)l.clicked(d)}})}function parse_json(t){try{var e=$.parseJSON(t)}catch(e){throw"JSON parse error: "+t}return e}Code.prototype.clicked=function(d){var c=this,i=String.fromCharCode(65+d);console.log(document.getElementById(i).checked),document.getElementById(i).onclick=function(e){if(1==document.getElementById(i).checked){var t="input#",n=$(t+=i).parent().html().substring(2,3);c.array[d]=n,c.count+=1,console.log(c.array)}else c.array[d]="",c.count-=1,console.log(c.array)}};